define(["domReady","wcs.context"],function(e,c){e(function(){try{var e="G"!=c.getUserType(),a="0"!=c.getLoyaltyOptIn(),o=c.getUserId(),t={memberID:e?o:null,loggedIn:e,loyaltyMember:e&&a},r=void 0!==c.getCookie("customer_clv_data")?c.getCookie("customer_clv_data"):null,d=void 0!==c.getCookie("USER_DL")?c.getCookie("USER_DL"):null;window.dataLayer=window.dataLayer||{},window.dataLayer.push({user:t});var l={loggedIn:e,loyaltyMember:e&&a};if(e){if(void 0!==r&&null!=r)try{var n=JSON.parse(r);for(var i in n)l[i]=n[i]}catch(e){console.error("Unable to add CLV data",e)}try{if(d)(s=JSON.parse(d)).sfAccountId&&(l["consumer-id"]=s.sfAccountId),s.email&&(l.em=btoa(s.email))}catch(e){console.error("Unable to add sfaccountID",e)}window.dataLayer.push({event:"loadUserData",user:l})}else{var s;if(d)(s=JSON.parse(d)).email&&(l.em=btoa(s.email),window.dataLayer.push({event:"loadUserData",user:l}))}}catch(e){console.error("Failed push to dataLayer",e)}})});
//# sourceMappingURL=../../../maps/js/metrics/datalayer/global.hash-0a05e07230394180e5f2395459c698af.js.map