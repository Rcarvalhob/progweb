define(["jquery","wcs.context","pubsub","cms.utilityNav.cart","cms.utilityNav.wishlist"],function(r,i,a){var n;return(n={init:function(){var t=this,a=(r(window),r(".upper"));t.navHeaderSignInURLEnabled=r("#btn-myaccount").hasClass("unav-myaccount-url-js"),t.$unavAccount=r(".unav-myaccount"),t.$unavAccountURL=r(".unav-myaccount-url-js"),t.$unavAccountLabel=t.$unavAccount.find(".unav-myaccount-label-js span").not(".icon"),t.$unavLoyalty=r(".unav-loyalty"),t.$unavLoyaltyJoin=r(".unav-loyalty-join"),t.$unavProgramDashboard=r(".unav-loyalty-program-dashboard"),t.$unavProgramJoin=r(".unav-loyalty-program-join"),t.$unavProgramPoints=r(".loyalty-program-points"),t.$unavSigning=r(".unav-signing"),t.$unavGreeting=r(".unav-greetname"),t.navHeaderSignInLabelEnabled=WCS_CONFIG.get("topnav::navHeaderSignInLabelEnabled"),t.myAccountLabelUser=t.$unavAccount.find(".unav-myaccount-title-js").attr("data-user"),t.myAccountLabelGuest=t.$unavAccount.find(".unav-myaccount-label-js").attr("data-guest"),t.updatedUIOnLogin=!1,a.find(".unav-email-sign-up-js").on("click",function(a){a.preventDefault();var n=r(".footer").find("input.email");r("html, body").animate({scrollTop:n.offset().top},500),n.focus()}),t.updateUI();var n=r(".loyalty-enrollment .account-registration-js");return n.on("submit",function(){n.find("#WC_VFMyAccountRegistrationForm_FormInput_email1_In_Register_1").val(n.find("#WC_VFMyAccountRegistrationForm_FormInput_logonId_In_Register_1").val())}),r.pubsub("subscribe","vfdp.login.success",function(){t.updateUI()}),r.pubsub("subscribe","vfdp.register.success",function(){t.updateUI()}),t.$unavAccount.click(function(a){var n="R"==i.getUserType();WCS_CONFIG.get("topnav::navHeaderHandleLoginFromAnotherTab")&&n&&!t.updatedUIOnLogin&&(a.preventDefault(),a.stopImmediatePropagation(),t.updateUI())}),t},updateUI:function(){var a=this,n="";if("R"==i.getUserType()){"1"==i.getLoyaltyOptIn()?(a.$unavLoyalty.removeClass("hidden"),a.$unavProgramPoints.html(i.getLoyaltyPoints())):a.$unavLoyaltyJoin.removeClass("hidden"),!0===a.navHeaderSignInLabelEnabled&&a.$unavAccountLabel.html(a.myAccountLabelUser),a.$unavSigning.show(),a.$unavAccount.show();var t="";r.each(document.cookie.split(/; */),function(){var a=this.split("=");-1<a[0].indexOf("DISPLAYNAME")&&(t=WCS_CONFIG.get("topnav::headerNavGreeting")+a[1].replace(/\+/g," "))}),r("#btn-username span").html(t),a.$unavGreeting.show(),loyaltyUserStatusCookie=i.getLoyaltyProgramStatusCookie(),n="full"==loyaltyUserStatusCookie?(a.$unavProgramDashboard.removeClass("hidden"),"loyaltyDashboardUrl"):(a.$unavProgramJoin.removeClass("hidden"),"loyaltyEnrollmentUrl");var e=r(".btn-myaccount-js");e.attr({href:e.data("account-href")}).removeAttr("data-open-ajax data-open").off("click.zf.reveal"),a.updatedUIOnLogin=!0}else{if(!0===a.navHeaderSignInLabelEnabled&&a.$unavAccountLabel.html(a.myAccountLabelGuest),n="accountHref",a.$unavSigning.hide(),a.$unavGreeting.hide(),a.$unavAccount.show(),a.$unavLoyaltyJoin.removeClass("hidden"),WCS_CONFIG.get("topnav::navHeaderMyAccountSwapHrefWithModalUrl")){var o=r("#btn-myaccount");o.attr("data-open-ajax",o.attr("href")),o.attr("href",o.data("accountHref"))}a.$unavProgramJoin.removeClass("hidden")}if(!0===a.navHeaderSignInURLEnabled){var u=a.$unavAccountURL.data(n);a.$unavAccountURL.attr("href",u)}}}).init(),n});
//# sourceMappingURL=../../../maps/js/wcs/view/global-nav.hash-04e19efc1ad8864a308265d939ac87ed.js.map