define(["jquery","pubsub","wcs.context","shared.main.screen"],function(a,e,t,c){var o,n=!1,i=WCS_CONFIG.get("global::updatePageNameBasedOnPreviousPage")||!1,r=WCS_CONFIG.get("topnav::enableMobileTopNavForTablet")||!1,s=2<=window.devicePixelRatio&&640<=window.innerWidth&&window.innerWidth<=1024&&r,l=WCS_CONFIG.get("ANALYTICS::plpAnalyticsRedirectFields")||!1;return(o={defaults:{dataAttr:"search-button-options",accordion:".topnav-accordion",searchButton:".topnav-searchbutton",searchButtonIcon:".topnav-searchbutton span",searchContainer:".topnav-search-container",searchInput:".topnav-search-input",searchForm:".topnav-search-form",searchSubmitButton:".topnav-search-button",searchSubmitButtonIcon:".icon-search",topnav:".topnav",searchResultsCloseBtn:"autosuggest-overlay-close",closeTooltip:".syte-camera-tooltip-close-button",tooltipWrapper:".syte-camera-tooltip-wrapper",topNavNewHeader:".top-nav-header"},init:function(){var e=this;return e.deferred=a.Deferred(),e.$element=a(e.defaults.searchButton),e.metadata=e.$element.data(e.defaults.dataAttr),e.config=a.extend({},e.defaults,e.metadata),e.config.$accordion=a(e.config.accordion),e.config.$searchButton=a(e.config.searchButton),e.config.$searchButtonLink=e.config.$searchButton.find("a"),e.config.$searchButtonAriaOpen=a(e.config.$searchButtonLink).attr("aria-label"),e.config.$searchButtonAriaClose=a(e.config.$searchButtonLink).data("closeAriaLabel"),e.config.$searchButtonIcon=a(e.config.searchButtonIcon),e.config.$searchContainer=a(e.config.searchContainer),e.config.$searchInput=a(e.config.searchInput),e.config.$searchForm=a(e.config.searchForm),e.config.$searchSubmitButton=a(e.config.searchSubmitButton),e.config.$searchSubmitButtonIcon=e.config.$searchSubmitButton.find(e.config.searchSubmitButtonIcon),e.config.hasMobileClearSearchButton=e.config.$searchSubmitButton.hasClass("clear-search"),e.config.$closeTooltip=a(e.config.closeTooltip),e.config.$tooltipWrapper=a(e.config.tooltipWrapper),e.config.$header=e.$element,e.config.$topnav=e.config.$header.closest(e.config.topnav),e.config.$topnav.closest(".transperant-topnav").length&&(n=!0),e.events(),e.configureAriaTags(),e.configureSearchForm(),e.deferred.resolve(),e},events:function(){var n=this;n.config.$searchForm.on("submit",function(e){i&&t.setCookie("searchTriggered",!0),""==n.config.$searchInput.val()&&e.preventDefault(),l&&window.localStorage.setItem("searchTerm",n.config.$searchInput.val())}),n.config.$searchInput.on("focus",function(){n.config.$searchForm.addClass("focus")}),n.config.$searchInput.on("blur",function(e){n.config.$searchForm.removeClass("focus")}),n.config.$searchButton.on("click touch",function(e){e.preventDefault(),n.toggleSearchContainer(n.config.$searchContainer)}),n.config.$closeTooltip.on("click",function(){n.config.$tooltipWrapper.css("display","none"),setTimeout(function(){n.config.$tooltipWrapper.css("display","")},500)}),a.pubsub("subscribe","window.resize.breakpoint",function(e,o){"small"!==o.now&&n.hideSearch(),n.configureAriaTags(),n.configureSearchForm()}),n.config.hasMobileClearSearchButton&&n.config.$searchSubmitButton.on("click touch",function(e){"small"!==c.size()&&!s||(e.preventDefault(),n.config.$searchInput.val(""))});var e=document.querySelector(".topnav-search-input"),o=document.querySelector(".topnav-clear-input");o&&(o.addEventListener("click",function(){e.value="",o.style.display="none"}),e.addEventListener("input",function(){""!==e.value?o.style.display="block":o.style.display="none"}))},toggleTransperantTopNav:function(e){if(n){var o=a(this.config.topNavNewHeader);"show"==e?o.addClass("new-transperant-topnav"):o.removeClass("new-transperant-topnav")}},configureAriaTags:function(){"small"!==c.size()?this.config.$searchContainer.removeAttr("aria-labelledby"):this.config.$searchContainer.attr({"aria-labelledby":"topnav-search-button"})},configureSearchForm:function(){var e=this;("small"===c.size()||s)&&e.config.hasMobileClearSearchButton?(e.config.$searchSubmitButton.addClass("search-clear-button"),e.config.$searchSubmitButtonIcon.addClass("icon-close"),e.config.$searchSubmitButtonIcon.removeClass("icon-search")):(e.config.$searchSubmitButton.removeClass("search-clear-button"),e.config.$searchSubmitButtonIcon.removeClass("icon-close"),e.config.$searchSubmitButtonIcon.addClass("icon-search"))},toggleSearchContainer:function(e){var o=this;("small"===c.size()||s)&&o.config.$searchButton.hasClass("active")?o.hideSearch():o.showSearch()},hideSearch:function(){var e=this;a.pubsub("publish","vfdp.aem.topnav.search.close"),window.topnavSearchClickHandler&&a(document).off("click touch",window.topnavSearchClickHandler),e.config.$searchButton.removeClass("active"),e.config.$searchButtonLink.attr({"aria-expanded":"false","aria-label":e.config.$searchButtonAriaOpen}),e.config.$searchButtonIcon.removeClass("icon-close").addClass("icon-search"),e.config.$accordion.is(":visible")&&e.config.$accordion.hasClass("topnav-accordion-search")&&!e.config.$accordion.hasClass("scrolled")||(e.toggleTransperantTopNav("hide"),e.config.$searchContainer.removeClass("active"))},showSearch:function(){var n=this;a.pubsub("publish","vfdp.aem.topnav.search.open"),window.topnavSearchClickHandler=function(e){var o=a(e.target);(a(o).hasClass("active")&&"topnav-search-container"===o.attr("id")||!o.closest(n.config.searchContainer).length&&!o.closest(n.config.searchButton).length&&!o.hasClass(n.config.searchResultsCloseBtn))&&n.hideSearch()},a(document).on("click touch",window.topnavSearchClickHandler),n.config.$searchButton.on("keyup",function(e){32!=e.keyCode&&13!=e.keyCode||(e.preventDefault(),topnavSearchClickHandler(e))}),n.config.$searchContainer.addClass("active"),n.config.$searchButton.addClass("active"),n.config.$searchButtonLink.attr({"aria-expanded":"true","aria-label":n.config.$searchButtonAriaClose}),n.toggleTransperantTopNav("show"),n.config.$searchButtonIcon.removeClass("icon-search").addClass("icon-close"),n.config.$searchInput.focus()}}).init(),o});
//# sourceMappingURL=../../../maps/js/cms/nav/searchButton.hash-0029b0da13faaba0f7f7bb57a7a61b04.js.map