define(["jquery","wcs.context","pubsub","shared.main.screen"],function(a,i,t,c){var e;return(e={defaults:{el:".topnav-utility .wishlist, .topnav-smallheader-container .wishlist, .topnav-util-js .nav-wishlist-qty-js",dataAttr:"wishlist-options",replaceString:"{count}",replaceElement:'<span class="qty topnav-wishlist-qty"/>',classHasProducts:"has-products",quantitySelector:".qty",wishlistNotification:".topnav-wishlist-notification",notify:{timeout:5e3}},init:function(){var t=this;return t.deferred=a.Deferred(),t.$element=a(t.defaults.el),t.metadata=t.$element.data(t.defaults.dataAttr),t.config=a.extend({},t.defaults,t.metadata),t.$element.hasClass("nav-wishlist-qty-js")&&(t.config.quantitySelector=".nav-wishlist-qty-js",t.config.replaceElement='<span class="nav-wishlist-qty-js"/>',t.config.replaceString=""),t.$wishlistNotification=a(t.config.wishlistNotification),t.$wishlistNotification.length&&(t.config.notify=a.extend({},t.config.notify,t.$wishlistNotification.data(t.defaults.dataAttr)),t.positionNotification(),sessionStorage.getItem("wishlistNotificationSeen")&&t.$wishlistNotification.find(".wishlist-message, .button").remove()),t.events(),t.deferred.resolve(),t.update()},events:function(){var n=this;a.pubsub("subscribe","WISHLIST_UPDATED",function(t,i){n.update();var e=!(!i||!i.suppressNotification)&&i.suppressNotification;t.indexOf("remove")<0&&!e&&n.showNotification()}),a.pubsub("subscribe","window.resize.breakpoint",function(){n.positionNotification()}),n.$wishlistNotification.length&&n.$wishlistNotification.find(".close-button").on("click",function(){n.hideNotification()})},update:function(){return this.updateDisplay(this.getCount())},getCount:function(){var t=Number(i.getWishList().quantity);return isNaN(t)?0:t},createQtyElement:function(){var e=this,n=a(e.config.replaceElement);return e.$element.html(function(t,i){return i.replace(e.config.replaceString,n.get(0).outerHTML)}),n=a(e.config.quantitySelector,e.$element)},replaceAttributes:function(){var n=this,s=[];return n.$element.children().each(function(t,e){a.each(e.attributes,function(t,i){"class"!==i.name&&-1<i.value.indexOf(n.config.replaceString)&&(i.value=i.value.replace(n.config.replaceString,n.getCount()),s.push({currentCount:n.getCount(),$element:a(e),attrib:i.name}))})}),s},updateDisplay:function(e){var t=this,i=a(t.config.quantitySelector,t.$element);try{t.config.replaceAttrs&&0!==t.config.replaceAttrs.length?t.config.replaceAttrs&&0<t.config.replaceAttrs.length&&a.each(t.config.replaceAttrs,function(t,i){i.$element.attr(i.attrib)&&i.$element.attr(i.attrib,i.$element.attr(i.attrib).replace(i.currentCount,e))}):t.config.replaceAttrs=t.replaceAttributes()}catch(t){console.log(t)}return i.length<=0&&(i=t.createQtyElement()),i.text(e),0<e?t.$element.addClass(t.config.classHasProducts):t.$element.removeClass(t.config.classHasProducts),t.config.replaced=!0,t.$element.removeClass("hide"),t},getIndexOfFirstVisibleElement:function(t){var i;return t.each(function(t){if(a(this).is(":visible"))return i=t,!1}),i},positionNotification:function(){var t=this;if(t.$wishlistNotification.length)if("large"===c.size()||"xlarge"===c.size()){var i=t.$element[t.getIndexOfFirstVisibleElement(t.$element)].offsetLeft,e=t.$element.outerWidth(),n=t.$wishlistNotification.outerWidth(),s=a(window).width(),o=s-i-e/2;o<n/2&&(o=n/2),s-n/2<o&&(o=s-n/2),t.$wishlistNotification.css("right",o)}else t.$wishlistNotification.css("right","")},showNotification:function(){var t=this;if(t.$wishlistNotification.length){t.positionNotification();var i=function(){0!=t.config.notify.timeout&&window.setTimeout(function(){t.hideNotification()},t.config.notify.timeout),t.$wishlistNotification[0].removeEventListener("transitionend",i)};t.$wishlistNotification[0].addEventListener("transitionend",i),t.$wishlistNotification.removeClass("hide"),t.clientWidth=t.$wishlistNotification[0].clientWidth,t.$wishlistNotification.addClass("fade-in"),sessionStorage.setItem("wishlistNotificationSeen","true")}},hideNotification:function(){var t=this,i=function(){t.$wishlistNotification.addClass("hide"),t.$wishlistNotification.find(".wishlist-message, .button").remove(),t.$wishlistNotification[0].removeEventListener("transitionend",i)};t.$wishlistNotification[0].addEventListener("transitionend",i),t.$wishlistNotification.removeClass("fade-in")}}).init(),e});
//# sourceMappingURL=../../../maps/js/cms/nav/utilityNav.wishlist.hash-0bfd0b072bbc6665e0a3681627290018.js.map