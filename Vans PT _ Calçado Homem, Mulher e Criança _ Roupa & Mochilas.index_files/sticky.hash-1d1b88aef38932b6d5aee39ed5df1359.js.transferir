define(["jquery","pubsub","shared.main.screen"],function(t,n,s){var a,e=WCS_CONFIG.get("topnav::promoBarTopEnabled")||!1,i=WCS_CONFIG.get("topnav::aemTopnavNewDesignEnabled")||!1,r=WCS_CONFIG.get("topnav::aemTopnavStyleContainerEnabled")||!1,c=WCS_CONFIG.get("topnav::topNavToggleScrollDisabled")||!1,d=WCS_CONFIG.get("topnav::newStickyTopEnabled")||!1,l=0,f=0;return(a={defaults:{el:".topnav-header",dataAttr:"topnav-sticky-options",topnavAccordion:".topnav-accordion",mainnav:".topnav-mainnav",search:".topnav-search-container",promobar:".topnav-promobar",promobarContainer:".topnav-promobar-container",cart:".topnav-cart a",logo:".topnav-logo",smallHeader:".topnav-smallheader-container",topnav:".topnav",scroll:"160",transitionTimeoutDelay:10,topNavNewHeader:".top-nav-header",searchButton:".topnav-searchbutton"},init:function(){i&&t("body").addClass("aem-new-topnav-design");var n=this;return n.deferred=t.Deferred(),n.$element=t(n.defaults.el),n.metadata=n.$element.data(n.defaults.dataAttr),n.config=t.extend({},n.defaults,n.metadata),n.calculateStickyScrollTrigger(),n.config.$header=n.$element,n.config.$mainnav=t(n.config.mainnav),n.config.$accordion=n.config.$header.find(n.config.topnavAccordion),n.config.$smallHeader=n.config.$header.find(n.config.smallHeader),n.config.$topnav=n.config.$header.closest(n.config.topnav),n.config.$promobar=n.config.$topnav.find(n.config.promobar),n.config.$promobarContainer=n.config.$topnav.find(n.config.promobarContainer),n.config.$search=n.config.$header.find(n.config.search),n.config.$searchButton=t(n.config.searchButton),f=n.config.$header.outerHeight(),n.config.$header.hasClass("sticky-animate")&&(n.config.animate=!0),n.config.$topnav.closest(".transperant-topnav").length&&(n.config.isNavTransparent=!0),n._build(),n.events(),n.deferred.resolve(),n},events:function(){var i=this;(i.config.isNavTransparent||"small"!==s.size())&&i.config.$header.hasClass("sticky-medium")&&window.addEventListener("scroll",function(n){i.toggleScrollEvents(i)}),i.bindTopnavAccordionEvents(),t.pubsub("subscribe","window.resize.breakpoint",function(n,a){if("small"===a.now)i.unbindScrollEvents();else{var o,e=t._data(window,"events").scroll;void 0!==e&&(o=t.grep(e,function(n,a){return n.data===i})),(!e||o.length<=0)&&t(window).on("scroll",i,i.toggleScrollEvents)}i.updateBodyPadding()})},bindTopnavAccordionEvents:function(){var o=this;t.pubsub("subscribe","vfdp.aem.topnav.accordion.open",function(n,a){"small"===s.size()&&o.updateBodyPadding(!0)}),t.pubsub("subscribe","vfdp.aem.topnav.accordion.close",function(n,a){"small"===s.size()&&o.updateBodyPadding()})},calculateBodyPadding:function(n,a){var o=this;return n?o.config.$smallHeader.outerHeight():o.config.isNavTransparent?o.config.$promobar.length?o.config.$promobar.outerHeight():0:i?o.config.$header.outerHeight():o.config.$header.outerHeight()+o.config.$promobar.outerHeight()},updateBodyPadding:function(n,a){var o=this,e="";void 0===a&&(a=s.size()),o.config.$header.hasClass("sticky-"+a)&&(e=o.calculateBodyPadding(n,a)),o.config.isNavTransparent&&o.config.$header.css("top",e),r&&n?t("body").css("padding-top",f):t("body").css("padding-top",e)},calculateStickyScrollTrigger:function(){var n=this;n.defaults.scroll=n.$element.outerHeight()||n.defaults.scroll},toggleTransperantTopNav:function(){if((n=this).config.isNavTransparent){var n,a=t((n=this).config.topNavNewHeader),o=t(window).scrollTop();o>=n.config.scroll?n.config.$header.addClass("sticky-animation"):o<=1&&n.config.$header.removeClass("sticky-animation"),0<o&&o<l?a.addClass("new-transperant-topnav"):("small"!==s.size()||"small"===s.size()&&o<=n.config.scroll&&!n.config.$searchButton.hasClass("active"))&&(a.removeClass("new-transperant-topnav"),n.updateBodyPadding()),l=o}},minimizeStickyHeader:function(n){var a=this;a.config.$header.addClass("sticky-minimized"),a.config.$header.hasClass("tnf-top-nav-new-design")&&"medium"===s.size()&&"large"!==s.size()&&a.config.$header.removeClass("sticky-minimized"),e||a.config.$promobar.addClass("hide"),t.pubsub("publish","vfdp.topnav.sticky.minimized");var o=function(n){n.target==a.config.$header[0]&&(a.config.$search.removeClass("notransition fade-out"),a.config.$mainnav.removeClass("notransition fade-out"),a.config.$header[0].removeEventListener("transitionend",o),t.pubsub("publish","vfdp.topnav.sticky.transitionend.minimized"))};!n&&this.config.animate&&(a.config.$search.addClass("notransition fade-out"),a.config.$mainnav.addClass("notransition fade-out"),a.config.$header[0].addEventListener("transitionend",o))},maximizeStickyHeader:function(n){var a=this;a.config.$header.removeClass("sticky-minimized"),t.pubsub("publish","vfdp.topnav.sticky.maximized");var o=function(){a.config.$promobarContainer.removeClass("mask"),a.config.$promobar[0].removeEventListener("transitionend",o)},e=function(n){n.target==a.config.$header[0]&&(a.config.$search.removeClass("notransition fade-out"),a.config.$mainnav.removeClass("notransition fade-out"),a.config.$header[0].removeEventListener("transitionend",e),a.config.$promobarContainer.addClass("mask"),a.config.$promobar.removeClass("hide notransition"),a.config.$promobar.addClass("slide-up"),a.config.$promobar[0].addEventListener("transitionend",o),a.config.timeout=window.setTimeout(function(){a.config.$promobar.removeClass("slide-up"),window.clearTimeout(a.config.timeout)},a.config.transitionTimeoutDelay),t.pubsub("publish","vfdp.topnav.sticky.transitionend.maximized"))};!n&&this.config.animate?(a.config.$search.addClass("notransition fade-out"),a.config.$mainnav.addClass("notransition fade-out"),a.config.$header[0].addEventListener("transitionend",e)):a.config.$promobar.removeClass("hide")},toggleScrollEvents:function(n){var a=n;if(c)0<t(window).scrollTop()?a.config.$header.hasClass("sticky-scrolled")||a.config.$header.addClass("sticky-scrolled"):a.config.$header.hasClass("sticky-scrolled")&&a.config.$header.removeClass("sticky-scrolled");else{var o=t(window).scrollTop(),e=!d||l<o||l<=a.config.scroll;a.toggleTransperantTopNav(),o>=a.config.scroll&&e?a.config.$header.hasClass("sticky-minimized")||a.minimizeStickyHeader():a.config.$header.hasClass("sticky-minimized")&&a.maximizeStickyHeader(),l=o}},unbindScrollEvents:function(){this.maximizeStickyHeader(!0),t(window).off("scroll",this.toggleScrollEvents)},toggleStickyState:function(n){var a=this,o=[],e=[],i=!!n;["sticky","sticky-small","sticky-medium","sticky-large"].forEach(function(n){a.config.$header.hasClass(n)&&!i?e.push(n):o.push(n)}),t("body").removeClass(o.join(" ")).addClass(e.join(" "))},relocatePromoBar:function(){this.config.isNavTransparent&&e&&this.config.$promobarContainer.detach().prependTo(this.config.$topnav)},_build:function(){this.relocatePromoBar(),this.toggleStickyState(),this.updateBodyPadding()}}).init(),a});
//# sourceMappingURL=../../../maps/js/cms/nav/sticky.hash-5d38c17fa549ad19819b2bb91746e7f6.js.map