define(["jquery","pubsub","shared.main.screen","shared.lazyload","foundation.util.keyboard"],function(n,e,o,a){var t,i=WCS_CONFIG.get("topnav::overflowHide")||!1,c=WCS_CONFIG.get("topnav::enableMobileTopNavForTablet")||!1,s=2<=window.devicePixelRatio&&640<=window.innerWidth&&window.innerWidth<=1024&&c;return(t={defaults:{el:".topnav-menubutton",dataAttr:"menu-button-options",menuButton:".topnav-menubutton a",menuIcon:".topnav-menubutton-icon",menuText:".topnav-menubutton-text",topnav:".topnav",topnavHeader:".topnav-header",topnavHeaderScreen:".topnav-header-screen",accordion:".topnav-accordion",searchButton:".topnav-searchbutton",searchContainer:".topnav-search-container",accordionSearchClass:"topnav-accordion-search",searchMenuClass:"topnav-menu-search",speed:250,easing:"swing",lazyLoadImages:"picture.lazy-load"},init:function(){var e=this;return e.deferred=n.Deferred(),e.$element=n(e.defaults.el),e.$body=n("body"),e.$html=n("html"),e.metadata=e.$element.data(e.defaults.dataAttr),e.config=n.extend({},e.defaults,e.metadata),e.$accordion=n(e.config.accordion),e.accordionMenuWidth=e.$accordion.data("mobile-menu-width"),e.$menuButton=n(e.config.menuButton),e.$menuButtonAriaOpen=n(e.$menuButton).attr("aria-label"),e.$menuButtonAriaClose=n(e.$menuButton).data("closeAriaLabel"),e.$menuIcon=n(e.config.menuIcon),e.$menuText=n(e.config.menuText),e.$topnav=n(e.config.topnav),e.$topnavHeader=n(e.config.topnavHeader),e.$topnavHeaderScreen=n(e.config.topnavHeaderScreen),e.$searchButton=n(e.config.searchButton),e.$searchContainer=n(e.config.searchContainer),e.enableSearch=e.$accordion.hasClass(e.config.accordionSearchClass),e.enablePeekABooFeature=e.$accordion.closest("header").hasClass("peek-a-boo-menu"),e.$accordion.removeClass("collapse"),this.events(),e.configureAriaTags(),e.deferred.resolve(),e},events:function(){var o=this;o.$menuButton.on("click touch",function(e){e.preventDefault(),n(o.config.topnavHeader).find(".media").not(".hide-for-small-only").find(o.config.lazyLoadImages).lazyload(),o.toggleMobileNav(o.$accordion),o.enablePeekABooFeature&&(o.$body.toggleClass("peek-a-boo-enabled"),i&&o.$html.toggleClass("peek-a-boo-enabled"),o.$accordion.css({width:o.accordionMenuWidth+"%"})),0!==n(window).scrollTop()&&window.scrollTo(0,0)}),o.$topnavHeaderScreen.on("click touch",function(e){e.preventDefault(),o.$body.css({overflow:""}),o.hideNavigation()}),n.pubsub("subscribe","window.resize.breakpoint",function(e,a){"small"!==a.now&&o.hideNavigation(),o.configureAriaTags(),o.enablePeekABooFeature&&(o.$body.removeClass("peek-a-boo-enabled"),i&&o.$html.removeClass("peek-a-boo-enabled"),o.$accordion.css({width:""}))}),n.pubsub("subscribe","vfdp.aem.topnav.search.open",function(e,a){o.hideNavigation()})},configureAriaTags:function(){"small"!==o.size()?this.$accordion.removeAttr("aria-labelledby"):this.$accordion.attr({"aria-labelledby":"topnav-menu-button"})},toggleMobileNav:function(e){var a=this;"small"!==o.size()&&!s||0==e[0].offsetHeight?a.showNavigation():a.hideNavigation()},hideNavigation:function(){var e=this;e.lastFocusableMenuItem&&e.lastFocusableMenuItem.length&&e.lastFocusableMenuItem.off("focusout.from.last.menu.item"),e.$accordion.hasClass("scrolled")||(("small"===o.size()||s)&&e.$topnav.hasClass("active")?e.$accordion.animate({height:0},{duration:e.config.speed,easing:e.config.easing,complete:function(){e.$accordion.css({display:"none"}),e.$topnav.removeClass("active"),e.$accordion.css({height:"",display:""}),e.$accordion.removeClass("active"),e.enableSearch&&e.hideSearchContainer(),n.pubsub("publish","vfdp.aem.topnav.accordion.close")}}):"small"===o.size()||s||(e.$topnav.removeClass("active"),e.$accordion.css({height:"",display:""}).removeClass("active"),e.enableSearch&&e.hideSearchContainer(),n.pubsub("publish","vfdp.aem.topnav.accordion.close")),e.$menuIcon.removeClass("icon-close").addClass("icon-menu"),e.$menuButton.attr({"aria-expanded":"false"}),e.$menuButton.attr({"aria-label":e.$menuButtonAriaOpen}),n(".topnav-utility-small-container").removeClass("hide"),e.$menuText.length&&e.$menuText.text(e.config.textClosed),n(document).off("scroll",e.mobileNavigationScrollEvents))},showNavigation:function(){var e,a=this;n.pubsub("publish","vfdp.aem.topnav.accordion.open"),a.$topnav.addClass("active"),a.enableSearch&&a.showSearchContainer(),e=a.$accordion.outerHeight(),a.$accordion.css({height:0}),a.$accordion.animate({height:e},{duration:a.config.speed,easing:a.config.easing,complete:function(){a.$accordion.height("")}}),a.$menuIcon.removeClass("icon-menu").addClass("icon-close"),a.$menuButton.attr({"aria-expanded":"true"}),a.$menuButton.attr({"aria-label":a.$menuButtonAriaClose}),a.$menuText.length&&a.$menuText.text(a.config.textOpened);var o=Foundation.Keyboard.findFocusable(a.$accordion);a.lastFocusableMenuItem=o.last(),a.lastFocusableMenuItem.on("focusout.from.last.menu.item",function(){a.$menuButton.focus()}),n(document).on("scroll",a,a.mobileNavigationScrollEvents)},showSearchContainer:function(){this.$searchContainer.addClass("active "+this.config.searchMenuClass)},hideSearchContainer:function(){var e=this;e.$searchContainer.removeClass(e.config.searchMenuClass),e.$searchButton.hasClass("active")||e.$searchContainer.removeClass("active")},mobileNavigationScrollEvents:function(e){var a=e.data;n(window).scrollTop()>a.$accordion.offset().top+a.$accordion.height()?(a.$menuIcon.hasClass("icon-close")&&(a.$accordion.addClass("scrolled"),a.$menuIcon.removeClass("icon-close").addClass("icon-menu")),a.enableSearch&&a.$searchContainer.removeClass("active"),a.$menuText.length&&a.$menuText.text(a.config.textClosed)):(a.$topnav.hasClass("active")&&(a.$accordion.removeClass("scrolled"),a.$menuIcon.removeClass("icon-menu").addClass("icon-close")),a.enableSearch&&a.$searchContainer.addClass("active"),a.$menuText.length&&a.$menuText.text(a.config.textOpened))}}).init(),t});
//# sourceMappingURL=../../../maps/js/cms/nav/menuButton.hash-ec6decc2543eb975f8a7042f7d4d93c7.js.map