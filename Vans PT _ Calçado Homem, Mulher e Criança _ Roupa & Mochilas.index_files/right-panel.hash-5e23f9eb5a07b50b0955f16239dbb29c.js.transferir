define(["jquery","pubsub","wcs.context"],function(o,t,e){function n(t,a){this.element=t,this.options=a,this.tabs=o("[data-tabcontent-id]",t),this.defaults={panelWidth:o(t).width(),panelDuration:500,contentDuration:325,overlayDelay:90,minHeight:639},this.metadata=o(this.element).data("right-panels-options")}var i="rightPanels";n.defaults=(n.prototype={defaults:{},init:function(){console.log("Initializing right sidebar panels for",o(this.element));var t=this;return t.config=o.extend({},t.defaults,t.options,t.metadata),t._build(),t.events(),t.updateTabCount("wishlist"),t.updateTabCount("shopcart"),t},_build:function(){},events:function(){var e=this;o("#global-body-overlay").on("click",function(){o(".global-cart-wishlist-panels-js .tags .active-js").trigger("click")}),o("[data-tabcontent-id]",e.element).on("click",function(t){t.preventDefault(),e.togglePanels(o(t.currentTarget).data("tabcontent-id"),t);var a=0<o(".active[data-tabcontent-id]").length;o.pubsub("publish","mini-cart-visibility-change",{isOpen:a})}),o(".global-cart-wishlist-panels-js > .content").on("click",".mini-cart-icon-close-js",function(t){o(".global-cart-wishlist-panels-js .tags .active-js").trigger("click")}),o.pubsub("subscribe","WISHLIST_UPDATED",function(t,a){e.updateTabCount("wishlist")}),o.pubsub("subscribe","SHOPCART_UPDATED",function(t,a){e.updateTabCount("shopcart")}),o.pubsub("subscribe","MINICART_CONTENT_RENDER_COMPLETE",function(t,a){var e=o("#rightpanel-tabpanel-shopcart").find('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');o(e).first().focus(),o(".global-cart-wishlist-panels-js").find(".notification").addClass("show-for-sr").removeClass("hide")})},updateTabCount:function(t){var a=this.getTab(t),e=this.getTabCount(t);o(".mini-cart-tag-qty",a).text(e)},getTabCount:function(t){var a;switch(t){case"wishlist":a=Number(e.getWishList().quantity);break;case"shopcart":a=Number(e.getShoppingCart().quantity);break;default:a=0}return a=isNaN(a)?0:a},getTab:function(t){return o('[data-tabcontent-id="'+t+'"]',this.element)},getTabPanel:function(t){return o('[data-tabcontent="'+t+'"]',this.element)},togglePanels:function(t,a){var e=this,n=!1;return n=e.currentTab?e.currentTab===t?(t=null,e.animatePanelContents(t,a),e.animatePanels("close"),!1):(e.animatePanelContents(t,a),!0):window.innerHeight>e.config.minHeight?(e.animatePanelContents(t,a),e.animatePanels("open"),!0):(t=null,!1),e.setActivePanel(t),e.setAccessibilityState(),n},setActivePanel:function(t){var a=this;o(".active[data-tabcontent-id]",a.element).length;a.currentTab=t,o(a.tabs).removeClass("active active-js").addClass("inactive inactive-js"),a.getTab(a.currentTab).removeClass("inactive inactive-js").addClass("active active-js"),0<o(".active[data-tabcontent-id]",a.element).length||o(a.tabs).removeClass("inactive inactive-js")},animatePanels:function(t){var a=this,e=("open"===t&&a.config.panelWidth,"open"===t?a.config.panelWidth:0),n="open"===t?"100%":"0%",i="open"===t?a.config.overlayDelay:0;o(".global-cart-wishlist-panels-js").stop(!0).animate({right:e},a.config.panelDuration),o("#global-body-overlay").stop(!0).delay(i).animate({width:n},a.config.panelDuration)},animatePanelContents:function(t,a){var e=this,n=e.getTabPanel(e.currentTab).stop(),i=e.getTabPanel(t).stop(),s=0<o(".active[data-tabcontent-id]",e.element).length,l=s?e.config.contentDuration:0;if(delay=s&&t===e.currentTab?0:e.config.panelDuration,n.css({zIndex:1}).delay(delay).animate({left:-e.config.panelWidth},l),i.css({left:e.config.panelWidth,zIndex:2}).delay(delay).animate({left:0},l),"shopcart"===t&&a&&a.originalEvent)try{window.dataLayer.push({event:"miniCartView",location:"right-panel"})}catch(t){console.error("Failed push to dataLayer",t)}},setAccessibilityState:function(){var t=this;o(t.tabs).attr("aria-selected","false"),o("[role='tabpanel']").attr("aria-hidden","true"),t.getTab(t.currentTab).attr("aria-selected","true"),t.getTabPanel(t.currentTab).attr("aria-hidden","false")}}).defaults,o.fn.rightPanels=function(a){return this.each(function(){var t=o(this).data(i);t||(t=new n(this,a).init(),o(this).data(i,t))})}});
//# sourceMappingURL=../../../maps/js/wcs/view/right-panel.hash-47abd34ef6619c95ccea78dee64c1905.js.map